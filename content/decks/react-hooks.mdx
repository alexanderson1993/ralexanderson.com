import { Appear, Split, Notes } from "gatsby-theme-mdx-deck"

<div>
  <h1 style={{ margin: 0 }}>React Hooks</h1>
  <span style={{ fontSize: "2rem" }}>or</span>
  <h2>Why I Will Never Write a Class Component Again</h2>
</div>

---

# Who's used React?

# 🙋‍♀️

---

# Who's used Hooks?

# 🙋‍♀️

---

> Hooks let you use state and other React features without writing a class. (Namely in a function component.)

> <cite>reactjs.org</cite>

---

# Hooks are just functions

```javascript
function useGeoLocation(options) {
  const [data, setData] = React.useState({})
  React.useEffect(() => {
    navigator.geolocation.getCurrentPosition(setData, () => {}, options)
    watchId = navigator.geolocation.watchPosition(
      onEvent,
      onEventError,
      options
    )

    return () => {
      mounted = false
      navigator.geolocation.clearWatch(watchId)
    }
  }, [])
  return data
}
```

---

> In reality, Hooks are much more than that. They’re about improved code reuse, composition, and better defaults.

> <cite>Tyler Mcginnis</cite>

---

# Don't Panic

<ul>
  <Appear>
    {[
      <li key="opt-in">Completely opt-in</li>,
      <li key="back">100% backwards-compatible</li>,
      <li key="classes">Classes still work</li>,
      <li key="18">Available in React 16.8.0+</li>,
    ]}
  </Appear>
</ul>

---

<div style={{display:"flex", justifyContent:"center"}}>

![But Why](/but-why.gif)

</div>

---

# Why Use Hooks

<ul>
  <Appear>
    {[
      <li key="reuse-logic">Reuse Stateful Logic</li>,
      <li key="alternative">
        <ul>
          <li>Alternative to HOCs and Render Props</li>
        </ul>
      </li>,
      <li key="back">Create Simple Abstractions</li>,
      <li key="composable">Composable Logic</li>,
      <li key="decalre">Declarative effects</li>,
      <li key="bugs">Surfaces unexpected bugs</li>,
      <li key="context">Multiple contexts in a single component</li>,
      <li key="sharable">Easily sharable</li>,
      <li key="static-typing">Easier to static type</li>,
      <li>Separation of concerns</li>,
    ]}
  </Appear>
</ul>

---

<video src="/react-hooks-1.mp4" />

<div style="position: absolute; right: 0; top:50%;">(attribution: @prchdk)</div>

<Notes>
  Here's a component with a couple of pieces. It's kind of hard to see what all
  is going on here. It looks like they use a ThemeContext consumer render prop
  down here, an event listener for the window resizing, and a bit of state for
  storing the name. There's a lot of stuff going on here. I'm going to highlight
  the sections of the component that deal with those particular parts of
  functionality.
</Notes>

---

<video autoPlay src="/react-hooks-1.mp4" />

<div style="position: absolute; right: 0; top:50%;">(attribution: @prchdk)</div>

<Notes>
  Wow. You've got things mixed together all over the place. Some components
  won't look so bad, but I'm sure many complex components will look a lot worse.
  What if we were to take those disperate functions and separate them into their
  own hooks.
</Notes>

---

<video autoPlay src="/react-hooks-2.mp4" />

<div style="position: absolute; right: 0; top:50%;">(attribution: @prchdk)</div>

<Notes>
  When it comes to separation of concerns, this is where Hooks really shine.
  Instead of spreading your component state and logic between a bunch of
  disperate lifecycle methods and constructors, you can put the entire logic for
  a particular function inside a hook. Then, just include that hook. This also
  allows you to reuse the hook in other components that might need it or compose
  it with other hooks.
</Notes>

---

# What are the Hooks?

- `useState`
- `useEffect`
- `useContext`
- `useRef`
- `useReducer`
- `useMemo`
- `useCallback`

---

<iframe
  src="https://codesandbox.io/embed/agitated-worker-wc3c5?fontsize=14"
  title="Hooks Demos"
  allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media"
  style="width:100%; height:90vh; border:0; border-radius: 4px; overflow:hidden;"
  sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
/>

---

# Custom Hooks

- `useMediaQuery`
- `useLockBodyScroll`
- `useClickOutside`
- `useHistory` - Undo/Redo
- `useKeyPress`
- `useOnScreen`
- `useAnimate`

<cite>useHooks.com</cite>

---

# Hooks Gotchas

- "Rules of Hooks"
  - Don't call hooks inside loops, conditions, or nested functions.
  - Only call hooks from React functions.
  - <https://reactjs.org/docs/hooks-rules.html>
  - Linter rule is available
- Closures vs `this`

---

# Why Use Classes

<ul>
  <Appear>
    {[
      <li key="error boundary">Error Boundary</li>,
      <li key="alternative">
        <ul>
          <li>Or use `react-error-boundary`</li>
        </ul>
      </li>,
      <li key="wut">getSnapshotBeforeUpdate</li>,
      <li key="wat">
        <ul>
          <li>Who's ever used that?</li>
        </ul>
      </li>,
      <li key="all">
        <blockquote>
          <em>
            Our goal is for Hooks to cover all use cases for classes as soon as
            possible.
          </em>
        </blockquote>{" "}
        <cite>reactjs.org</cite>
      </li>,
    ]}
  </Appear>
</ul>

---

# Why Use Hooks

- Reuse stateful logic
- Create simple abstractions
- Composable logic
- Declarative effects
- Surfaces unexpected bugs
- Multiple contexts in a single component
- Easily Sharable
- Easier to statically type
- Separation of concerns

---

<div style={{textAlign:"center"}}>

# Learn more!

<https://reactjs.org/docs/hooks-intro.html/>

<https://usehooks.com/>

<https://tylermcginnis.com/why-react-hooks/>

</div>

---

<div style={{textAlign:"center"}}>

## Thanks 🙌

<https://ralexanderson.com>

<https://twitter.com/ralex1993>

<https://github.com/alexanderson1993>

<https://ralexanderson.com/decks/react-hooks/>

</div>

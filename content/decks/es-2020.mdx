import { Notes } from "gatsby-theme-mdx-deck"

# ES 2020

## The Future of JavaScript

---

# TC39

> Ecma International's TC39 is a group of JavaScript developers, implementers, academics, and more, collaborating with the community to maintain and evolve the definition of JavaScript.

---

# 2020 Accepted Proposals

- Optional Chaining
- Nullish Coalescing
- BigInt
- `String.prototype.matchAll`
- `Promise.allSettled`
- `globalThis`
- Dynamic Import

---

# Optional Chaining

## What it Solves

```JavaScript
const nestedProperty =
  data &&
  data.layer1 &&
  data.layer1.layer2 &&
  data.layer1.layer2.nestedProperty;
```

---

# Optional Chaining

## How It Works

```JavaScript
const nestedProperty = data?.layer1?.layer2?.nestedProperty;
```

---

# Optional Chaining

## Array Indicies & Computed Properties

```JavaScript
const nestedProperty = data?.layer1?.listOfStuff?.[5]?.nestedProperty;
const nestedProperty2 = data?.layer1?.[somePropertyName]?.nestedProperty;
```

---

# Optional Chaining

## Function Calls

```JavaScript
const nestedProperty = data?.someFunction?.(arg1, arg2)
```

---

# Optional Chaining

## Availability

![Optional Chaining](/es-2020/optional-chaining.jpg)

---

# Nullish Coalescing

## What it Solves

```JavaScript
const testValue1 = false;
const testValue2 = 0;
const testValue3 = null;

const realOrDefaultValue1 = testValue1 ||
  testValue1 === false ? testValue1 : "Default Value"
const realOrDefaultValue2 = testValue2 ||
  testValue2 === 0 ? testValue2 : "Default Value"
const realOrDefaultValue3 = testValue3 ||
  testValue3 === "" ? testValue3 : "Default Value"
```

---

# Nullish Coalescing

## How It Works

```JavaScript
const testValue1 = false;
const testValue2 = 0;
const testValue3 = null;

const realOrDefaultValue1 = testValue1 ?? "Default Value"
const realOrDefaultValue2 = testValue2 ?? "Default Value"
const realOrDefaultValue3 = testValue3 ?? "Default Value"
```

---

# Nullish Coalescing

## With Optional Chaining

```JavaScript
const myGreatValue = foo.someBarProp?.toUpperCase() || "NO PROP HERE"
```

---

# Nullish Coalescing

## Availability

![Nullish Coalescing](/es-2020/nullish-coalescing.jpg)

---

# BigInt

## What it Solves

```JavaScript
const wrongNumber = ((Number.MAX_SAFE_INTEGER ** 10) * 2 - 10) % 7
```

---

# BigInt

## How It Works

```JavaScript
const correctNumber =
  ((BigInt(Number.MAX_SAFE_INTEGER) ** 10n) * 2n - 10n) % 7n
```

---

# BigInt

## Availability

![BigInt](/es-2020/bigint.jpg)

---

# `String.prototype.matchAll()`

## What it Solves

```JavaScript
const text = "my my my this is an interesting string";
const matches = text.match(/my/gi)
```

---

# `String.prototype.matchAll()`

## How It Works

```JavaScript
const text = "my my my this is an interesting string";
const matches = text.matchAll("my") // Iterator

const match1 = matches.next()
const allMatches = Array.from(matches)
const otherAllMatches = [...matches]
```

---

# `String.prototype.matchAll()`

## `for ... of` Loop

```JavaScript
const text = "my my my this is an interesting string";
const matches = text.matchAll("my") // Iterator

for (const match of matches) {
  console.log(`Found ${match[0]}
    start=${match.index}
    end=${match.index + match[0].length}.`);
}
```

---

# `String.prototype.matchAll()`

## Capture Groups

```JavaScript
let regexp = /t(e)(st(\d?))/g;
let str = 'test1test2';

let array = [...str.matchAll(regexp)];

array[0];
// ['test1', 'e', 'st1', '1', index: 0, input: 'test1test2', length: 4]
```

---

# `String.prototype.matchAll()`

## Availability

![matchAll](/es-2020/matchAll.jpg)

---

# `Promise.allSettled`

## What it Solves

```JavaScript
let promise1 = Promise.resolve('resolved!')
let promise2 = Promise.reject('rejected!')

Promise.all([promise1, promise2]).then(results => console.log(results)).catch(() => console.log('Rejected!'))

// rejected!
```

---

# `Promise.allSettled`

## How it Works

```JavaScript
let promise1 = Promise.resolve('resolved!')
let promise2 = Promise.reject('rejected!')

Promise.allSettled([promise1, promise2]).then(results => console.log(results))

// [{ status: "fulfilled", value: "resolved!" }, { status: "rejected", reason: "rejected!" }]
```

---

# `Promise.allSettled`

## Availability

![allSettled](/es-2020/allSettled.jpg)

---

# `globalThis`

## What it Solves

```JavaScript
// In a Browser
window // 👍
frames  // 👍
this  // 👍
self  // 👍
global // TypeError
```

---

# `globalThis`

## What it Solves

```JavaScript
// In Node
window // TypeError
frames  // TypeError
this  // TypeError
self  // TypeError
global // 👍
```

---

# `globalThis`

## What it Solves

```JavaScript
// In WebWorkers
window // TypeError
frames  // TypeError
this  // TypeError
self // 👍
global // TypeError
```

---

# `globalThis`

## How It Works

```JavaScript
// Everywhere
globalThis // 👍
if (typeof globals.setTimeout !== 'function') {
  // no setTimeout in this environment!
}
```

---

# `globalThis`

## Availability

![globalThis](/es-2020/globalThis.jpg)

---

# Dynamic Import

## How It Works

```JavaScript
import('https://unpkg.com/stargate-names@1.3.0/dist/stargate-names.esm.js').then(randomName => console.log(randomName))
```

---

# Dynamic Import

## Availability

![import](/es-2020/import.jpg)

---

<div style={{textAlign:"center"}}>

## Thanks 🙌

<https://ralexanderson.com>

<https://twitter.com/ralex1993>

<https://github.com/alexanderson1993>

<https://ralexanderson.com/decks/es-2020/>

</div>
